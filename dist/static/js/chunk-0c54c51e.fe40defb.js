(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c54c51e"],{"71ef":function(t,e,n){"use strict";n.d(e,"i",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"h",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"j",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"e",(function(){return b})),n.d(e,"b",(function(){return m}));var a=n("b775");function i(t){return Object(a["a"])({url:"/task/startTask",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/task/revokeProcess",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/task/selectMyTask",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/task/claimTask",method:"get",params:{taskId:t}})}function l(t){return Object(a["a"])({url:"/task/unClaimTask",method:"get",params:{taskId:t}})}function c(t){return Object(a["a"])({url:"/task/selectGroupTask",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/task/passTask",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/task/selectHistory",method:"get",params:t})}function b(t){return Object(a["a"])({url:"/task/selectBefore",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/task/fallBackTaskByTaskDefinitionKey",method:"get",params:t})}},c171:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dialogVisible?n("el-dialog",{attrs:{title:"办理任务",visible:t.dialogVisible,fullscreen:!0,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-tabs",{attrs:{"tab-position":t.tabPosition},on:{"tab-click":t.clickTab}},[n("el-tab-pane",{attrs:{label:"办理任务"}},[n("el-descriptions",{staticStyle:{width:"50%",margin:"0 auto"},attrs:{column:2}},[n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-user"}),t._v(" 标题 ")]),t._v(" "+t._s(t.businessData.qingJiaTitle)+" ")],2),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-mobile-phone"}),t._v(" 申请人 ")]),t._v(" "+t._s(t.businessData.nickName)+" ")],2),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-office-building"}),t._v(" 申请原因 ")]),t._v(" "+t._s(t.businessData.qingJiaReason)+" ")],2)],1),n("div",{staticStyle:{width:"50%",margin:"50px auto",display:"flex","flex-direction":"column"}},[n("div",[n("el-radio",{attrs:{label:"1"},model:{value:t.submitType,callback:function(e){t.submitType=e},expression:"submitType"}},[t._v("同意")]),n("el-radio",{attrs:{label:"2"},model:{value:t.submitType,callback:function(e){t.submitType=e},expression:"submitType"}},[t._v("驳回")]),"2"===t.submitType?n("el-select",{attrs:{remote:"",placeholder:"驳回到："},on:{"visible-change":t.selectBefore},model:{value:t.denyTo,callback:function(e){t.denyTo=e},expression:"denyTo"}},t._l(t.beforeData,(function(t){return n("el-option",{key:t.dkey,attrs:{label:t.taskName,value:t.dkey}})})),1):t._e()],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("提交")]),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("关闭")])],1)])],1),n("el-tab-pane",{attrs:{label:"历史记录",name:"history"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.historyList}},[n("el-table-column",{attrs:{prop:"taskName",label:"节点名称",width:"180"}}),n("el-table-column",{attrs:{prop:"nickName",label:"审批人",width:"180"}}),n("el-table-column",{attrs:{prop:"comment",label:"审批意见"}}),n("el-table-column",{attrs:{prop:"endTime",label:"审批时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.endTime?e.row.endTime:e.row.startTime)+" ")]}}],null,!1,412639085)})],1)],1)],1)],1):t._e()},i=[],s=(n("b0c0"),n("71ef")),o=n("ef5b"),r={data:function(){return{beforeData:[],beforeDataLoading:!1,denyTo:null,tabPosition:"left",dialogVisible:!1,rowData:null,submitType:null,comment:null,businessData:null,historyList:[]}},methods:{handleOpen:function(t){this.rowData=t,this.dialogVisible=!0,this.getInfoQingJiaData()},getInfoQingJiaData:function(){var t=this;Object(o["c"])(this.rowData.businessKey).then((function(e){t.businessData=e.data}))},clickTab:function(t,e){console.log(t.name,"asjdh111gh"),"history"===t.name&&this.getSelectHistory()},selectBefore:function(t){var e=this;t&&(this.beforeDataLoading=!0,this.denyTo=null,this.beforeData=[],Object(s["e"])({taskId:this.rowData.taskId,comment:this.comment,businessKey:this.rowData.businessKey,businessType:this.rowData.businessType,processInstanceId:this.rowData.processInstanceId}).then((function(t){console.table(t),setTimeout((function(){e.beforeData=t.data,e.beforeDataLoading=!1}),100)})))},getSelectHistory:function(){var t=this;Object(s["g"])({processInstanceId:this.rowData.processInstanceId}).then((function(e){console.log(e.data,"aslkjdhag"),t.historyList=e.data}))},onSubmit:function(){var t=this;this.submitType?this.comment?(1==this.submitType&&Object(s["c"])({taskId:this.rowData.taskId,comment:this.comment,params:{day:this.businessData.qingJiaDay},businessKey:this.rowData.businessKey,businessType:this.rowData.businessType,processInstanceId:this.rowData.processInstanceId}).then((function(e){console.log(e,"[[[["),t.dialogVisible=!1,t.$emit("ok")})),2==this.submitType&&(console.log("nnnnnnnnn"+this.denyTo),Object(s["b"])({comment:this.comment,businessKey:this.rowData.businessKey,businessType:this.rowData.businessType,processInstanceId:this.rowData.processInstanceId,taskId:this.rowData.taskId,taskDefinitionKey:this.denyTo}).then((function(e){console.log(e,"[[[["),t.dialogVisible=!1,t.denyTo=null,t.beforeData=[],t.$emit("ok")})))):this.$message.warning("请输入审批意见"):this.$message.warning("请选择提交类型")}}},l=r,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);e["default"]=u.exports},ef5b:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return l}));var a=n("b775");function i(t){return Object(a["a"])({url:"/infoQingJia/infoQingJia/list",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/infoQingJia/infoQingJia/"+t,method:"get"})}function o(t){return Object(a["a"])({url:"/infoQingJia/infoQingJia",method:"post",data:t})}function r(t){return Object(a["a"])({url:"/infoQingJia/infoQingJia",method:"put",data:t})}function l(t){return Object(a["a"])({url:"/infoQingJia/infoQingJia/"+t,method:"delete"})}}}]);